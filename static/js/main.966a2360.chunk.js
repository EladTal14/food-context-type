(this["webpackJsonpfood-order"]=this["webpackJsonpfood-order"]||[]).push([[0],{23:function(e,t,n){},24:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r,c=n(1),a=n.n(c),s=n(6),o=n.n(s),i=(n(23),n(2)),l=(n(24),n.p+"static/media/meals.2971f633.jpg"),u=n(0),d=function(){return Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(u.jsx)("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})})},j=(n(26),a.a.createContext({items:[],totalAmount:0,addItem:function(e){},removeItem:function(e){},clearCart:function(){}})),b=function(e){var t=e.showCartHandler,n=Object(c.useContext)(j),r=n.items,a=Object(c.useState)(!1),s=Object(i.a)(a,2),o=s[0],l=s[1],b=r.reduce((function(e,t){return e+t.amount}),0),m="button ".concat(o?"bump":"");return Object(c.useEffect)((function(){if(0!==n.items.length){l(!0);var e=setTimeout((function(){return l(!1)}),300);return function(){clearTimeout(e)}}}),[r]),Object(u.jsxs)("button",{className:"".concat(m),onClick:function(){return t()},children:[Object(u.jsx)("span",{className:"icon",children:Object(u.jsx)(d,{})}),Object(u.jsx)("span",{children:"Your Cart"}),Object(u.jsx)("span",{className:"badge",children:b})]})},m=function(e){var t=e.showCartHandler;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("header",{className:"header",children:[Object(u.jsx)("h1",{children:"ReactMeals"}),Object(u.jsx)(b,{showCartHandler:t})]}),Object(u.jsx)("div",{className:"main-image",children:Object(u.jsx)("img",{src:l,alt:"meals"})})]})},O=n(3),h=(n(27),n(28),function(e){var t=e.children;return Object(u.jsx)("div",{className:"card",children:t})}),f=(n(29),n(30),n(31),a.a.forwardRef((function(e,t){var n=e,r=n.input,c=n.label;return Object(u.jsxs)("div",{className:"input",children:[Object(u.jsxs)("label",{htmlFor:r.id,children:[" ",c]}),Object(u.jsx)("input",Object(O.a)({ref:t},r))]})}))),x=function(e){var t=e.id,n=e.addToCartHandler,r=Object(c.useState)(!0),a=Object(i.a)(r,2),s=a[0],o=a[1],l=Object(c.useRef)(null);return Object(u.jsxs)("form",{className:"form",onSubmit:function(e){var t;if(e.preventDefault(),null!==l.current){if(0===(t=l.current.value).trim().length||+t<1||+t>5)return void o(!1);n(+t)}},children:[Object(u.jsx)(f,{label:"Amount",ref:l,input:{id:t,type:"number",min:"1",max:"5",step:"1",defaultValue:"1"}}),Object(u.jsx)("button",{children:"+ Add"}),!s&&Object(u.jsx)("p",{children:"Please enter a valid amount (1-5)."})]})},p=function(e){var t=e.name,n=e.id,r=e.description,a=e.price,s=Object(c.useContext)(j),o="$".concat(a.toFixed(2));return Object(u.jsxs)("li",{className:"meal",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("h3",{children:t}),Object(u.jsx)("div",{className:"description",children:r}),Object(u.jsx)("div",{className:"price",children:o})]}),Object(u.jsx)("div",{children:Object(u.jsx)(x,{addToCartHandler:function(e){s.addItem({id:n,name:t,amount:e,price:a,description:r})},id:n})})]})},v=n(4),C=n.n(v),y=n(5),E=function(){var e=Object(y.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/food-context-type",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"https://food-order-25669-default-rtdb.europe-west1.firebasedatabase.app/meals.json"}).REACT_APP_API_KEY_MEALS);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("something went horribly wrong!");case 5:return e.next=7,t.json();case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(y.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/food-context-type",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"https://food-order-25669-default-rtdb.europe-west1.firebasedatabase.app/meals.json"}).REACT_APP_API_KEY_ORDER,{method:"POST",body:JSON.stringify({user:t,items:n})});case 2:if(e.sent.ok){e.next=5;break}throw new Error("something went horribly wrong!");case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!0),s=Object(i.a)(a,2),o=s[0],l=s[1],u=Object(c.useState)(),d=Object(i.a)(u,2),j=d[0],b=d[1];return Object(c.useEffect)((function(){(function(){var e=Object(y.a)(C.a.mark((function e(){var t,n,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:for(c in t=e.sent,n=[],t)n.push({id:c,name:t[c].name,description:t[c].description,price:t[c].price,amount:t[c].amount});r(n),l(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().catch((function(e){l(!1),b(e.message)}))}),[]),{meals:n,setMeals:r,isLoading:o,httpError:j}}(),t=(e.setMeals,e.meals),n=e.isLoading,r=e.httpError,a=t.map((function(e){return Object(u.jsx)(p,Object(O.a)({},e),e.id)}));return n?Object(u.jsx)("section",{className:"meals-loading",children:Object(u.jsx)("p",{children:"Loading..."})}):r?Object(u.jsx)("section",{className:"meals-error",children:Object(u.jsx)("p",{children:r})}):Object(u.jsx)("section",{className:"meals",children:Object(u.jsx)(h,{children:Object(u.jsx)("ul",{children:a})})})},w=(n(33),function(){return Object(u.jsxs)("section",{className:"summary",children:[Object(u.jsx)("h2",{children:"Delicious Food, Delivered To You"}),Object(u.jsx)("p",{children:"Choose your favorite meal from our broad selection of available meals and enjoy a delicious lunch or dinner at home."}),Object(u.jsx)("p",{children:"All our meals are cooked with high-quality ingredients, just-in-time and of course by experienced chefs!"})]})}),S=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(w,{}),Object(u.jsx)(_,{})]})},A=(n(34),function(e){var t=e.showCartHandler;return Object(u.jsx)("div",{onClick:function(){return t()},className:"backdrop"})}),N=function(e){var t=e.children;return Object(u.jsx)("div",{className:"modal",children:Object(u.jsx)("div",{className:"content",children:t})})},T=document.getElementById("overlays"),R=function(e){var t=e.children,n=e.showCartHandler;return Object(u.jsxs)(u.Fragment,{children:[o.a.createPortal(Object(u.jsx)(A,{showCartHandler:n}),T),o.a.createPortal(Object(u.jsx)(N,{children:t}),T)]})},P=(n(35),n(36),function(e){var t=e.meal,n=e.onRemove,r=e.onAdd,c=t.id,a=t.price,s=t.amount,o=t.name;return Object(u.jsxs)("li",{className:"cart-item",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:o}),Object(u.jsxs)("div",{className:"cart-item--summary",children:[Object(u.jsx)("span",{className:"cart-item--summary--price",children:a.toFixed(2)}),Object(u.jsxs)("span",{className:"cart-item--summary--amount",children:["x ",s]})]})]}),Object(u.jsxs)("div",{className:"cart-item--summary--actions",children:[Object(u.jsx)("button",{onClick:function(){return n(c)},children:"\u2212"}),Object(u.jsx)("button",{onClick:function(){return r(t)},children:"+"})]})]})}),H=n(14),k=n(15),F=function(e){return""===e.trim()},I=function(e){var t=e.showCartHandler,n=e.submitOrderHandler,r=Object(c.useState)({name:!0,street:!0,city:!0,postalCode:!0}),a=Object(i.a)(r,2),s=a[0],o=a[1],l=Object(c.useRef)(null),d=Object(c.useRef)(null),j=Object(c.useRef)(null),b=Object(c.useRef)(null);return Object(u.jsxs)(D,{onSubmit:function(e){var t,r,c,a,s,i,u,m;(e.preventDefault(),null===l.current||null===d.current||null===j.current||null===b.current||(t=l.current.value,c=j.current.value,a=b.current.value,r=d.current.value,s=!F(t),m=!F(a),i=!F(r),u=!(c.trim().length<=5),o({name:s,postalCode:u,city:m,street:i}),s&&m&&i&&u))&&n({name:t,city:a,street:r,postalCode:c})},children:[Object(u.jsxs)("div",{className:"control ".concat(s.name?"":"invalid"),children:[Object(u.jsx)("label",{htmlFor:"name",children:"Your Name"}),Object(u.jsx)("input",{ref:l,type:"text",id:"name"}),!s.name&&Object(u.jsx)("p",{children:"Please enter valid name"})]}),Object(u.jsxs)("div",{className:"control ".concat(s.street?"":"invalid"),children:[Object(u.jsx)("label",{htmlFor:"street",children:"Street"}),Object(u.jsx)("input",{ref:d,type:"text",id:"street"}),!s.street&&Object(u.jsx)("p",{children:"Please enter valid name"})]}),Object(u.jsxs)("div",{className:"control ".concat(s.postalCode?"":"invalid"),children:[Object(u.jsx)("label",{htmlFor:"postal",children:"Postal Code"}),Object(u.jsx)("input",{ref:j,type:"text",id:"postal"}),!s.postalCode&&Object(u.jsx)("p",{children:"Please enter valid postal code"})]}),Object(u.jsxs)("div",{className:"control ".concat(s.city?"":"invalid"),children:[Object(u.jsx)("label",{htmlFor:"city",children:"City"}),Object(u.jsx)("input",{ref:b,type:"text",id:"city"}),!s.city&&Object(u.jsx)("p",{children:"Please enter valid city"})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("button",{type:"button",onClick:t,children:"Cancel"}),Object(u.jsx)("button",{children:"Confirm"})]})]})},D=k.a.form(r||(r=Object(H.a)(["\n  form {\n    margin: 1rem 0;\n    height: 19rem;\n    overflow: auto;\n  }\n\n  & .control {\n    margin-bottom: 0.5rem;\n  }\n\n  & .control label {\n    font-weight: bold;\n    margin-bottom: 0.25rem;\n    display: block;\n  }\n\n  & .control input {\n    font: inherit;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    width: 20rem;\n    max-width: 100%;\n  }\n\n  & .actions {\n    display: flex;\n    justify-content: flex-end;\n    gap: 1rem;\n  }\n\n  & div button {\n    font: inherit;\n    color: #5a1a01;\n    cursor: pointer;\n    background-color: transparent;\n    border: none;\n    border-radius: 25px;\n    padding: 0.5rem 2rem;\n  }\n\n  & div button:hover,\n  div button:active {\n    background-color: #ffe6dc;\n  }\n\n  & div .submit {\n    border: 1px solid #5a1a01;\n    background-color: #5a1a01;\n    color: white;\n  }\n\n  & div .submit:hover,\n  div .submit:active {\n    background-color: #7a2706;\n  }\n\n  & .invalid label {\n    color: #ca3e51;\n  }\n\n  & .invalid input {\n    border-color: #aa0b20;\n    background-color: #ffeff1;\n  }\n"]))),K=function(e){var t=e.showCartHandler,n=Object(c.useState)(!1),r=Object(i.a)(n,2),a=r[0],s=r[1],o=Object(c.useState)(!1),l=Object(i.a)(o,2),d=l[0],b=l[1],m=Object(c.useState)(!1),h=Object(i.a)(m,2),f=h[0],x=h[1],p=Object(c.useState)(!1),v=Object(i.a)(p,2),E=v[0],_=v[1],w=Object(c.useContext)(j),S=function(e){w.addItem(Object(O.a)(Object(O.a)({},e),{},{amount:1}))},A=Object(u.jsx)("ul",{className:"cart-items",children:w.items.map((function(e){return Object(u.jsx)(P,{meal:e,onAdd:S,onRemove:w.removeItem},e.id)}))}),N="$".concat(w.totalAmount.toFixed(2)),T=w.items.length>0,H=function(){var e=Object(y.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.prev=1,e.next=4,g(t,w.items);case 4:b(!1),x(!0),w.clearCart(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),_(!0),console.log(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),k=Object(u.jsxs)(u.Fragment,{children:[A,Object(u.jsxs)("div",{className:"total",children:[Object(u.jsx)("span",{children:"Total amount"}),Object(u.jsx)("span",{children:N})]}),Object(u.jsxs)(u.Fragment,{children:[a&&Object(u.jsx)(I,{submitOrderHandler:H,showCartHandler:t}),!a&&Object(u.jsxs)("div",{className:"actions",children:[Object(u.jsx)("button",{className:"button--alt",onClick:function(){return t()},children:"Close"}),T&&Object(u.jsx)("button",{onClick:function(){s(!0)},className:"button",children:"Order"})]})]})]}),F=Object(u.jsx)("p",{children:"Sending order data"}),D=Object(u.jsx)("p",{children:"Error has occurred please try again"}),K=Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"actions",children:Object(u.jsx)("button",{className:"button",onClick:function(){return t()},children:"Close"})}),Object(u.jsx)("p",{children:"Successfully sent the order"})]});return Object(u.jsxs)(R,{showCartHandler:t,children:[Object(u.jsx)(u.Fragment,{}),Object(u.jsxs)(u.Fragment,{children:[!d&&!E&&!f&&k,d&&!E&&F,E&&D,!d&&f&&!E&&K]})]})},M=n(12),L={items:[],totalAmount:0},W=function(e,t){switch(t.type){case"ADD_ITEM":var n,r,c=e.totalAmount+t.payload.price*t.payload.amount,a=e.items.findIndex((function(e){return e.id===t.payload.id})),s=e.items[a];return s?(n=Object(O.a)(Object(O.a)({},s),{},{amount:s.amount+t.payload.amount}),(r=Object(M.a)(e.items))[a]=n):(n=Object(O.a)({},t.payload),r=e.items.concat(t.payload)),Object(O.a)(Object(O.a)({},e),{},{items:r,totalAmount:c});case"REMOVE_ITEM":var o,i=e.items.findIndex((function(e){return e.id===t.payload})),l=e.items[i],u=e.totalAmount-l.price;if(1===l.amount)o=e.items.filter((function(e){return e.id!==t.payload}));else{var d=Object(O.a)(Object(O.a)({},l),{},{amount:l.amount-1});(o=Object(M.a)(e.items))[i]=d}return Object(O.a)(Object(O.a)({},e),{},{items:o,totalAmount:u});case"CLEAR_CART":return L}return L},Y=function(e){var t=e.children,n=Object(c.useReducer)(W,L),r=Object(i.a)(n,2),a=r[0],s=r[1],o={items:a.items,totalAmount:a.totalAmount,addItem:function(e){s({type:"ADD_ITEM",payload:e})},removeItem:function(e){s({type:"REMOVE_ITEM",payload:e})},clearCart:function(){s({type:"CLEAR_CART"})}};return Object(u.jsx)(j.Provider,{value:o,children:t})};var B=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1],a=function(){r((function(e){return!e}))};return console.log("process",Object({NODE_ENV:"production",PUBLIC_URL:"/food-context-type",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"https://food-order-25669-default-rtdb.europe-west1.firebasedatabase.app/meals.json"})),Object(u.jsxs)(Y,{children:[n&&Object(u.jsx)(K,{showCartHandler:a}),Object(u.jsx)(m,{showCartHandler:a}),Object(u.jsx)("main",{children:Object(u.jsx)(S,{})})]})};o.a.render(Object(u.jsx)(B,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.966a2360.chunk.js.map